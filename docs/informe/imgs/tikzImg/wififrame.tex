\documentclass[11pt]{standalone}
%CORREGIR VHDL ORIGINAL

\usepackage[spanish]{babel}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{tikz}
\usepackage{siunitx}

\usetikzlibrary{arrows,backgrounds,decorations.pathreplacing,fit,positioning,petri,babel,shapes,circuits.logic.mux,circuits.logic.US,shapes.gates.logic,trees,patterns}
%\tikzstyle{style} = [definition]
\tikzstyle{interior}=[rectangle,rounded corners,draw=black,minimum size=3em, text width=20,fill=white]
\tikzstyle{exterior} = [rectangle,draw=black,minimum size=40]
\tikzstyle{mode text} = [midway,sloped,text width=200]
\tikzstyle{contenedor} = [rectangle,draw=black]
\tikzstyle{core}=[interior]
\tikzstyle{perif} = [interior,minimum height=20]
\tikzstyle{buf}=[core, text width=53, align=center]
\tikzstyle{obuf} = [buf, node distance=.7]
\tikzstyle{env} = [fill=black!20]
\tikzstyle{simple}=[rectangle, draw=black, minimum height=220, text width=65,align=center]
\tikzstyle{moore} = [rectangle,draw=black, minimum height= 30,text width=80,align=left]
\tikzstyle{mealy} = [rectangle,rounded corners=12, draw=black, text width = 80,align=left,minimum height=40]
\tikzstyle{ask} = [diamond,text width=50,draw=black,align=center,]
\tikzstyle{bloque}=[exterior,align=center,minimum size=60,text width=60]
\tikzstyle{hub}=[draw=black,anchor=west,circle]
\tikzstyle{dev}=[draw=black,anchor=west,rectangle,rounded corners,text width=60,align=center]
\tikzstyle{pid}=[draw=black,align=center,rectangle,rounded corners,minimum width=20,minimum height=120,pattern=north east lines,pattern color=black!35]
\tikzstyle{dir}=[draw,rectangle,rounded corners,minimum width=20,minimum height=120,align=center]
\tikzstyle{data}=[draw=black,align=center,rectangle,rounded corners,minimum width=120,minimum height=120,fill=black!05]
\tikzstyle{crc}=[draw=black,align=center,rectangle,rounded corners,minimum width=20,minimum height=120,pattern=dots,pattern color=black!25]
\tikzstyle{field}=[draw=black,rectangle,rounded corners, minimum height=30,align=center]

\newcommand{\epg}[3]{
	Buffer {#1}\\
	[44pt]EP{#2}\\
	[44pt]{#3} Bytes}

\newcommand{\ep}[3]{
		Buffer {#1}\\
		[8pt]EP{#2}\\
		[8pt]{#3} Bytes}


\begin{document}
	\begin{tikzpicture}[]
		\begin{scope}[transform shape,node distance=.05,>=latex]
			\node[field](cp){CP};
			\node[field](dcid)[right=of cp]{Dur/CID};
			\node[field](routd)[right=of dcid]{DED};
			\node[field](dest)[right=of routd]{DD};
			\node[field](emit)[right=of dest]{DE};
			\node[field](cseq)[right=of emit]{CS};
			\node[field](route)[right=of cseq]{DEE};
			\node[field](msj)[right=of route]{Mensaje};
			\node[field](crc)[right=of msj]{SCP};
		\end{scope}
		\begin{scope}[transform shape, node distance=.01]
			\node[](cptx)[below=of cp]{2};
			\node[node distance=.2](bytes)[left=of cptx] {\bf Bytes};
			\node[](dcidtx)[below=of dcid]{2};
			\node[](routdtx)[below=of routd]{6};
			\node[](desttx)[below=of dest]{6};
			\node[](emittx)[below=of emit]{6};
			\node[](cseqtx)[below=of cseq]{2};
			\node[](routetx)[below=of route]{6};
			\node[text width=50](patx)[below=of msj]{variable};
			\node[](msjtx)[below=of crc]{4};
			\node[node distance = .5](addtx)[below=of dest] {Direcciones};
			\draw[decoration={brace,mirror,raise=14pt},decorate](routd.south west) to (emit.south east);
		\end{scope}
		\begin{scope}[transform shape,node distance=.4,text width = 320]
			\node[below=of desttx](ref){
				{\bf Referencias}\\
				{\bf Dur/CID:} Duraci{\'o}n del paquete/Identificaci{\'o}n de conexi{\'o}n\\
				{\bf DED:} Direcci{\'o}n de Enrutador de Destino\\
				{\bf DD:} Direcci{\'o}n de Destino\\
				{\bf DE:} Direcci{\'o} de Emisi{\'o}n\\
				{\bf CS:} Control de Secuecia\\
				{\bf DEE:} Direcci{\'o}n de Enrutador de Emisi√≥n\\
				{\bf SCP:} Secuencia de chequeo del paquete
				};
		\end{scope}
	\end{tikzpicture}
\end{document}